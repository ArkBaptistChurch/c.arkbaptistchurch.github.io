<!DOCTYPE html>
<html>
    <head>
        <title>Newsletter Display</title>
        <meta charset="utf-8"/>
        <link rel="stylesheet" type="text/css" href="default-style.css">
        <style>
            body {
                overflow-y: hidden;
                height: 100vh;
            }

            td {
                width: 50%;
                text-align: center;
            }

            #widget {
                background-color: var(--color-background-main);
                font-size: 16px;
            }

            .c1 {
                width: 25%;
            }

            .c2 {
                width: 75%;
            }
        </style>
        <script type="text/javascript" src="file-list.js"></script>
    </head>
    <body>
        <iframe id="widget" src=""></iframe>

        <script type="text/javascript">
        var cellTemplate = "<a href=\"{link}\" target=\"_blank\"><div class=\"cell\"><table><tr><td class=\"c1 noselect\"><strong>{date} Newsletter</strong></td></tr></table></div></a>";

        function displayContent(content, element) {
            var a = content[0][3].substring(0, content[0][3].indexOf("?") - 5) + "/preview";
            document.getElementById("widget").src = a;
        }

        (function() {
            var arr = url.split(/[&?]/);
            var id = "10AqSBKBZrGGtaK9X9FWeao9X91Dckhh0";
            for (var i = 1; i < arr.length; i++) {
                if (arr[i].indexOf("id=") == 0) id = arr[i].substring(3);
            }
            
            getDataFromNames(data => displayContent(data, "widget"), id, "application", false);
        })();
        </script>
    </body>
</html>
